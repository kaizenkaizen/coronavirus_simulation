<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>Coronavirus Simulation</title>

</head>

<body>
  <h1> version: 3 </h1>
  <h3> This simple simulation estimates the number of cases for coronavirus in the U.S in the future. The start date of the simulation is January 19, 2020, which is the first confirmed case in the U.S. </h3>
  
  <label>Duration in days</label>
  <input type="number" id="duration">
  
  <label>Growth rate (defaults is 1.147)</label>
  <input type="number" id="growthRate">
  
  <h4> After a person has recovered. That person is no longer able to infect new people. It is estimated that after first being infected a patient is usually no longer contagious on average 17 days afterwards.</h4>
  <label>Recovery date in days (try 17) </label>
  <input type="number" id="growthRate">
  
  <button type="button">Calulate</button>
  <h3> output </h3>
  <h3 id="outputText"> 0 </h3>
  
  <script> 
    let infectedCounts = []
    let beginningInfectedCount = 1; 
    let growthRate = 1.147;
    let recoveryDuration = 17;
    let duration = 140;


    for (let i = 0; i < duration; i++){
        let total = beginningInfectedCount;
        for (let j = i-recoveryDuration; j < i; j++){
            if (j >= 0){
                total += infectedCounts[j];
            }
        }

        infectedCounts[i] = (total * growthRate) - total;
    }

    let sum = beginningInfectedCount;
    infectedCounts.forEach(x => {sum += x});

    console.log(infectedCounts);
    console.log(sum);
  </script>
</body>
</html>
